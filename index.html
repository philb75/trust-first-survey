<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trust First - Questionnaire Bien Vieillir √† Domicile</title>
    <style>
        :root {
            --primary: #0d6a6a;
            --primary-light: #e8f4f4;
            --primary-dark: #094d4d;
            --accent: #c4956a;
            --accent-light: #f5ede6;
            --text: #2d3748;
            --text-light: #718096;
            --background: #fafafa;
            --white: #ffffff;
            --border: #e2e8f0;
            --error: #e53e3e;
            --success: #38a169;
            --submit: #e67e22;
            --submit-dark: #d35400;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--background);
            color: var(--text);
            line-height: 1.7;
            font-size: 18px;
        }

        .container { max-width: 720px; margin: 0 auto; padding: 20px; }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--white);
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 0 0 20px 20px;
        }

        .header h1 { font-size: 2rem; margin-bottom: 10px; }
        .header p { font-size: 1.1rem; opacity: 0.95; max-width: 500px; margin: 0 auto; }
        .logo { font-size: 2.5rem; margin-bottom: 15px; }

        .progress-container {
            background: var(--white);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }

        .progress-bar { height: 8px; background: var(--border); border-radius: 4px; overflow: hidden; }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 4px;
            transition: width 0.4s ease;
        }
        .progress-text { text-align: center; margin-top: 10px; color: var(--text-light); font-size: 0.95rem; }

        .form-section {
            background: var(--white);
            padding: 30px;
            border-radius: 16px;
            margin-bottom: 20px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            display: none;
        }

        .form-section.active { display: block; animation: fadeIn 0.4s ease; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title { font-size: 1.4rem; color: var(--primary); margin-bottom: 8px; }
        .section-subtitle { color: var(--text-light); margin-bottom: 25px; font-size: 1rem; }

        .form-group { margin-bottom: 25px; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 10px; font-size: 1.05rem; }
        .label-hint { font-weight: 400; color: var(--text-light); font-size: 0.9rem; display: block; margin-top: 4px; }
        .required::after { content: " *"; color: var(--error); }

        input[type="text"], input[type="email"], input[type="tel"], textarea, select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        textarea { min-height: 100px; resize: vertical; }

        .option-cards { display: flex; flex-direction: column; gap: 12px; }
        .option-card { position: relative; }
        .option-card input[type="radio"], .option-card input[type="checkbox"] { 
            position: absolute; opacity: 0; pointer-events: none; 
        }

        .option-card label {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            background: var(--white);
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 400;
            font-size: 1rem;
        }

        .option-card label:hover { border-color: var(--primary); background: var(--primary-light); }
        .option-card input:checked + label { border-color: var(--primary); background: var(--primary-light); }

        .option-card input:checked + label::before {
            content: "‚úì";
            display: flex;
            align-items: center;
            justify-content: center;
            width: 26px;
            height: 26px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            margin-right: 12px;
            font-size: 14px;
            flex-shrink: 0;
        }

        .option-card label::before {
            content: "";
            display: block;
            width: 26px;
            height: 26px;
            border: 2px solid var(--border);
            border-radius: 50%;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .rating-scale { display: flex; justify-content: space-between; gap: 8px; flex-wrap: wrap; }
        .rating-scale .option-card { flex: 1; min-width: 50px; }
        .rating-scale .option-card label { justify-content: center; padding: 14px 10px; font-weight: 600; }
        .rating-scale .option-card label::before { display: none; }
        .rating-scale .option-card input:checked + label { background: var(--primary); color: white; border-color: var(--primary); }
        .scale-labels { display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.9rem; color: var(--text-light); }

        .checkbox-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 12px; }
        .checkbox-grid .option-card label::before { border-radius: 6px; }

        /* Autre field styling */
        .autre-field {
            margin-top: 12px;
            padding-left: 38px;
            display: none;
        }
        .autre-field.visible { display: block; }
        .autre-field input {
            width: 100%;
            padding: 12px 14px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
        }

        .nav-buttons { display: flex; justify-content: space-between; gap: 15px; margin-top: 30px; }

        .btn {
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 1.05rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            flex: 1;
        }

        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(13, 106, 106, 0.35); }
        .btn-secondary { background: var(--white); color: var(--text); border: 2px solid var(--border); }
        .btn-secondary:hover { border-color: var(--primary); color: var(--primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }

        /* Submit button - More prominent */
        .btn-submit {
            background: linear-gradient(135deg, var(--submit) 0%, var(--submit-dark) 100%);
            color: white;
            flex: 1;
            padding: 20px 32px;
            font-size: 1.15rem;
            box-shadow: 0 4px 15px rgba(230, 126, 34, 0.3);
        }
        .btn-submit:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 8px 25px rgba(230, 126, 34, 0.4); 
        }

        .btn.loading { pointer-events: none; opacity: 0.7; }
        .btn.loading::after {
            content: "";
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-left: 8px;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        .success-message { text-align: center; padding: 60px 30px; }
        .success-icon { font-size: 4rem; margin-bottom: 20px; }
        .success-message h2 { color: var(--primary); margin-bottom: 15px; font-size: 1.8rem; }
        .success-message p { color: var(--text-light); font-size: 1.1rem; margin-bottom: 10px; }

        .info-box {
            background: var(--accent-light);
            border-left: 4px solid var(--accent);
            padding: 16px 20px;
            border-radius: 0 10px 10px 0;
            margin-bottom: 25px;
            font-size: 0.95rem;
        }
        .info-box strong { color: var(--primary-dark); }

        /* Lead magnet box */
        .lead-magnet {
            background: linear-gradient(135deg, #fff9e6 0%, #fff3cd 100%);
            border: 2px solid #f0c14b;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        .lead-magnet-title {
            font-weight: 700;
            color: var(--primary-dark);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .lead-magnet p { font-size: 0.95rem; color: var(--text); margin: 0; }

        .privacy-note {
            background: var(--primary-light);
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            font-size: 0.9rem;
            color: var(--text-light);
        }
        .privacy-note strong { color: var(--primary); }

        .footer { text-align: center; padding: 30px 20px; color: var(--text-light); font-size: 0.9rem; }

        .error-message {
            background: #fee;
            border: 1px solid var(--error);
            color: var(--error);
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }

        /* Hidden by default */
        .conditional-group { display: none; }
        .conditional-group.visible { display: block; }

        @media (max-width: 600px) {
            body { font-size: 16px; }
            .header h1 { font-size: 1.6rem; }
            .form-section { padding: 20px; }
            .nav-buttons { flex-direction: column; }
            .btn { width: 100%; justify-content: center; }
            .rating-scale { gap: 6px; }
            .rating-scale .option-card label { padding: 12px 8px; font-size: 0.9rem; }
            .checkbox-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">üè†üíô</div>
        <h1>Trust First</h1>
        <p>Aidez-nous √† concevoir l'assistant IA qui vous accompagnera dans le bien-vieillir √† domicile</p>
    </header>

    <div class="container">
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-text">Section <span id="currentSection">1</span> sur <span id="totalSections">5</span></div>
        </div>

        <div class="error-message" id="errorMessage"></div>

        <form id="surveyForm">
            <!-- Section 1: Profil -->
            <div class="form-section active" data-section="1">
                <h2 class="section-title">üë§ Votre Profil</h2>
                <p class="section-subtitle">Quelques questions pour mieux vous conna√Ætre</p>

                <div class="form-group">
                    <label class="required">Vous √™tes :</label>
                    <div class="option-cards">
                        <div class="option-card">
                            <input type="radio" name="profil" id="profil_senior" value="Senior (60 ans et plus)" required>
                            <label for="profil_senior">Senior (60 ans et plus)</label>
                        </div>
                        <div class="option-card">
                            <input type="radio" name="profil" id="profil_aidant" value="Aidant familial">
                            <label for="profil_aidant">Aidant familial (vous accompagnez un proche √¢g√©)</label>
                        </div>
                        <div class="option-card">
                            <input type="radio" name="profil" id="profil_pro" value="Professionnel de sant√©/social">
                            <label for="profil_pro">Professionnel de sant√© ou du secteur m√©dico-social</label>
                        </div>
                        <div class="option-card">
                            <input type="radio" name="profil" id="profil_autre" value="Autre">
                            <label for="profil_autre">Autre (curieux, porteur de projet...)</label>
                        </div>
                    </div>
                </div>

                <div class="form-group" id="age_group">
                    <label class="required" id="age_label">Votre tranche d'√¢ge :</label>
                    <div class="option-cards">
                        <div class="option-card">
                            <input type="radio" name="age" id="age_moins45" value="Moins de 45 ans" required>
                            <label for="age_moins45">Moins de 45 ans</label>
                        </div>
                        <div class="option-card">
                            <input type="radio" name="age" id="age_45_59" value="45-59 ans">
                            <label for="age_45_59">45 - 59 ans</label>
                        </div>
                        <div class="option-card">
                            <input type="radio" name="age" id="age_60_74" value="60-74 ans">
                            <label for="age_60_74">60 - 74 ans</label>
                        </div>
                        <div class="option-card">
                            <input type="radio" name="age" id="age_75plus" value="75 ans et plus">
                            <label for="age_75plus">75 ans et plus</label>
                        </div>
                    </div>
                </div>

                <!-- Conditional: Only for Seniors and Aidants -->
                <div class="form-group conditional-group" id="logement_group">
                    <label class="required" id="logement_label">Situation de logement :</label>
                    <div class="option-cards">
                        <div class="option-card">
                            <input type="radio" name="logement" id="log_seul" value="Seul(e) √† domicile">
                            <label for="log_seul">Seul(e) √† domicile</label>
                        </div>
                        <div class="option-card">
                            <input type="radio" name="logement" id="log_couple" value="En couple √† domicile">
                            <label for="log_couple">En couple √† domicile</label>
                        </div>
                        <div class="option-card">
                            <input type="radio" name="logement" id="log_famille" value="Avec de la famille">
                            <label for="log_famille">Avec de la famille (enfants, petits-enfants)</label>
                        </div>
                        <div class="option-card">
                            <input type="radio" name="logement" id="log_residence" value="En r√©sidence seniors">
                            <label for="log_residence">En r√©sidence seniors ou habitat partag√©</label>
                        </div>
                    </div>
                </div>

                <!-- Conditional: Only for Professionals -->
                <div class="form-group conditional-group" id="pro_context_group">
                    <label class="required">Dans quel contexte exercez-vous ?</label>
                    <div class="option-cards">
                        <div class="option-card">
                            <input type="radio" name="pro_context" id="pro_domicile" value="Aide √† domicile (SAAD, SSIAD)">
                            <label for="pro_domicile">Aide √† domicile (SAAD, SSIAD)</label>
                        </div>
                        <div class="option-card">
                            <input type="radio" name="pro_context" id="pro_ehpad" value="EHPAD / R√©sidence seniors">
                            <label for="pro_ehpad">EHPAD / R√©sidence seniors</label>
                        </div>
                        <div class="option-card">
                            <input type="radio" name="pro_context" id="pro_liberal" value="Lib√©ral (infirmier, kin√©, m√©decin)">
                            <label for="pro_liberal">Lib√©ral (infirmier, kin√©, m√©decin)</label>
                        </div>
                        <div class="option-card">
                            <input type="radio" name="pro_context" id="pro_autre" value="Autre contexte professionnel">
                            <label for="pro_autre">Autre</label>
                        </div>
                    </div>
                </div>

                <div class="nav-buttons">
                    <div></div>
                    <button type="button" class="btn btn-primary" onclick="nextSection()">Continuer ‚Üí</button>
                </div>
            </div>

            <!-- Section 2: Besoins -->
            <div class="form-section" data-section="2">
                <h2 class="section-title">üéØ Besoins et Difficult√©s</h2>
                <p class="section-subtitle">Quels sont les d√©fis du quotidien ?</p>

                <div class="form-group">
                    <label class="required">Quelles difficult√©s rencontrez-vous au quotidien ?
                        <span class="label-hint">Plusieurs r√©ponses possibles</span>
                    </label>
                    <div class="checkbox-grid">
                        <div class="option-card"><input type="checkbox" name="difficultes" id="diff_medicaments" value="Gestion des m√©dicaments"><label for="diff_medicaments">üíä Gestion des m√©dicaments</label></div>
                        <div class="option-card"><input type="checkbox" name="difficultes" id="diff_rdv" value="Rappel des rendez-vous"><label for="diff_rdv">üìÖ Rappel des rendez-vous</label></div>
                        <div class="option-card"><input type="checkbox" name="difficultes" id="diff_isolement" value="Sentiment d'isolement"><label for="diff_isolement">üòî Sentiment d'isolement</label></div>
                        <div class="option-card"><input type="checkbox" name="difficultes" id="diff_securite" value="S√©curit√© √† domicile"><label for="diff_securite">üè† S√©curit√© √† domicile (chutes)</label></div>
                        <div class="option-card"><input type="checkbox" name="difficultes" id="diff_coordination" value="Coordination avec les aidants"><label for="diff_coordination">ü§ù Coordination avec les proches</label></div>
                        <div class="option-card"><input type="checkbox" name="difficultes" id="diff_administratif" value="D√©marches administratives"><label for="diff_administratif">üìÑ D√©marches administratives</label></div>
                        <div class="option-card"><input type="checkbox" name="difficultes" id="diff_mobilite" value="Mobilit√© dans le logement"><label for="diff_mobilite">üö∂ Mobilit√© dans le logement</label></div>
                        <div class="option-card"><input type="checkbox" name="difficultes" id="diff_technologie" value="Utilisation de la technologie"><label for="diff_technologie">üì± Utilisation de la technologie</label></div>
                        <div class="option-card"><input type="checkbox" name="difficultes" id="diff_charge" value="Charge mentale / stress"><label for="diff_charge">üß† Charge mentale / stress</label></div>
                        <div class="option-card"><input type="checkbox" name="difficultes" id="diff_equilibre" value="√âquilibre vie pro / aidant"><label for="diff_equilibre">‚öñÔ∏è Concilier vie pro et r√¥le d'aidant</label></div>
                    </div>
                </div>

                <div class="form-group conditional-group" id="aidant_temps_group">
                    <label>En tant qu'aidant, combien de temps consacrez-vous par semaine √† votre proche ?</label>
                    <div class="option-cards">
                        <div class="option-card"><input type="radio" name="temps_aidant" id="temps_moins5" value="Moins de 5h"><label for="temps_moins5">Moins de 5 heures</label></div>
                        <div class="option-card"><input type="radio" name="temps_aidant" id="temps_5_10" value="5-10h"><label for="temps_5_10">5 √† 10 heures</label></div>
                        <div class="option-card"><input type="radio" name="temps_aidant" id="temps_10_20" value="10-20h"><label for="temps_10_20">10 √† 20 heures</label></div>
                        <div class="option-card"><input type="radio" name="temps_aidant" id="temps_plus20" value="Plus de 20h"><label for="temps_plus20">Plus de 20 heures</label></div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Quelles solutions utilisez-vous actuellement ?
                        <span class="label-hint">Plusieurs r√©ponses possibles</span>
                    </label>
                    <div class="checkbox-grid">
                        <div class="option-card"><input type="checkbox" name="solutions_actuelles" id="sol_teleassistance" value="T√©l√©assistance"><label for="sol_teleassistance">üÜò T√©l√©assistance (m√©daillon)</label></div>
                        <div class="option-card"><input type="checkbox" name="solutions_actuelles" id="sol_aide" value="Aide √† domicile"><label for="sol_aide">üë©‚Äç‚öïÔ∏è Aide √† domicile</label></div>
                        <div class="option-card"><input type="checkbox" name="solutions_actuelles" id="sol_famille" value="Appels famille"><label for="sol_famille">üìû Appels r√©guliers de la famille</label></div>
                        <div class="option-card"><input type="checkbox" name="solutions_actuelles" id="sol_alexa" value="Assistant vocal"><label for="sol_alexa">üîä Assistant vocal (Alexa, Google)</label></div>
                        <div class="option-card"><input type="checkbox" name="solutions_actuelles" id="sol_tablette" value="Tablette senior"><label for="sol_tablette">üì± Tablette senior (Ardoiz...)</label></div>
                        <div class="option-card"><input type="checkbox" name="solutions_actuelles" id="sol_aucune" value="Aucune solution"><label for="sol_aucune">‚ùå Aucune solution particuli√®re</label></div>
                    </div>
                </div>

                <div class="nav-buttons">
                    <button type="button" class="btn btn-secondary" onclick="prevSection()">‚Üê Retour</button>
                    <button type="button" class="btn btn-primary" onclick="nextSection()">Continuer ‚Üí</button>
                </div>
            </div>

            <!-- Section 3: Technologie -->
            <div class="form-section" data-section="3">
                <h2 class="section-title">üì± Rapport √† la Technologie</h2>
                <p class="section-subtitle">Pour adapter notre solution √† vos usages</p>

                <div class="form-group">
                    <label class="required">Quel appareil utilisez-vous le plus souvent ?</label>
                    <div class="option-cards">
                        <div class="option-card"><input type="radio" name="appareil" id="app_smartphone" value="Smartphone" required><label for="app_smartphone">üì± Smartphone</label></div>
                        <div class="option-card"><input type="radio" name="appareil" id="app_tablette" value="Tablette"><label for="app_tablette">üì≤ Tablette</label></div>
                        <div class="option-card"><input type="radio" name="appareil" id="app_ordinateur" value="Ordinateur"><label for="app_ordinateur">üíª Ordinateur</label></div>
                        <div class="option-card"><input type="radio" name="appareil" id="app_aucun" value="Aucun / Tr√®s peu"><label for="app_aucun">‚ùå Aucun / Tr√®s peu</label></div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Comment pr√©f√©rez-vous interagir avec un assistant ?</label>
                    <div class="info-box"><strong>üí° Notre assistant s'adapte √† vous</strong> : choisissez le mode qui vous convient le mieux.</div>
                    <div class="option-cards">
                        <div class="option-card"><input type="radio" name="interface" id="int_voix" value="Voix" required><label for="int_voix">üé§ Par la voix (parler et √©couter)</label></div>
                        <div class="option-card"><input type="radio" name="interface" id="int_tactile" value="√âcran tactile"><label for="int_tactile">üëÜ Par √©cran tactile (boutons simples)</label></div>
                        <div class="option-card"><input type="radio" name="interface" id="int_texte" value="Texte"><label for="int_texte">‚å®Ô∏è Par texte (√©crire et lire)</label></div>
                        <div class="option-card"><input type="radio" name="interface" id="int_video" value="Avatar"><label for="int_video">üë§ Avec un visage / avatar √† l'√©cran</label></div>
                        <div class="option-card"><input type="radio" name="interface" id="int_mix" value="M√©lange"><label for="int_mix">üîÑ Un m√©lange selon les situations</label></div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Avez-vous d√©j√† utilis√© un assistant vocal (Siri, Alexa, Google) ?</label>
                    <div class="option-cards">
                        <div class="option-card"><input type="radio" name="experience_vocal" id="exp_regulier" value="Oui, r√©guli√®rement" required><label for="exp_regulier">‚úÖ Oui, r√©guli√®rement</label></div>
                        <div class="option-card"><input type="radio" name="experience_vocal" id="exp_parfois" value="Oui, parfois"><label for="exp_parfois">üëç Oui, parfois</label></div>
                        <div class="option-card"><input type="radio" name="experience_vocal" id="exp_essaye" value="Essay√© mais abandonn√©"><label for="exp_essaye">ü§î J'ai essay√© mais abandonn√©</label></div>
                        <div class="option-card"><input type="radio" name="experience_vocal" id="exp_jamais" value="Non, jamais"><label for="exp_jamais">‚ùå Non, jamais</label></div>
                    </div>
                </div>

                <div class="nav-buttons">
                    <button type="button" class="btn btn-secondary" onclick="prevSection()">‚Üê Retour</button>
                    <button type="button" class="btn btn-primary" onclick="nextSection()">Continuer ‚Üí</button>
                </div>
            </div>

            <!-- Section 4: Solution -->
            <div class="form-section" data-section="4">
                <h2 class="section-title">üí° Notre Solution</h2>
                <p class="section-subtitle">Un assistant IA bienveillant qui vous conna√Æt</p>

                <div class="info-box">
                    <strong>üè† Trust First</strong> est un assistant IA qui :<br><br>
                    ‚Ä¢ <strong>Se souvient</strong> de vous (famille, habitudes, pr√©f√©rences)<br>
                    ‚Ä¢ <strong>Vous accompagne</strong> au quotidien (rappels, m√©t√©o, conversations)<br>
                    ‚Ä¢ <strong>Rassure vos proches</strong> sans √™tre intrusif<br>
                    ‚Ä¢ <strong>Respecte vos donn√©es</strong> (h√©bergement certifi√© en France)<br><br>
                    <em>üí∞ <strong>Gratuit pour les familles</strong> ‚Äî financ√© par des partenariats avec des services de confiance (adaptation du domicile, mutuelles) que nous vous recommandons uniquement si vous en avez besoin.</em>
                </div>

                <div class="form-group">
                    <label class="required">Quelles fonctionnalit√©s vous int√©ressent le plus ?
                        <span class="label-hint">Maximum 3 choix</span>
                    </label>
                    <div class="checkbox-grid">
                        <div class="option-card"><input type="checkbox" name="fonctionnalites" id="feat_rappels" value="Rappels m√©dicaments/RDV"><label for="feat_rappels">üìÖ Rappels m√©dicaments et RDV</label></div>
                        <div class="option-card"><input type="checkbox" name="fonctionnalites" id="feat_conversation" value="Conversation et compagnie"><label for="feat_conversation">üí¨ Conversation et compagnie</label></div>
                        <div class="option-card"><input type="checkbox" name="fonctionnalites" id="feat_securite" value="D√©tection de probl√®mes"><label for="feat_securite">üõ°Ô∏è Alerte si probl√®me d√©tect√©</label></div>
                        <div class="option-card"><input type="checkbox" name="fonctionnalites" id="feat_famille" value="Lien avec la famille"><label for="feat_famille">üë®‚Äçüë©‚Äçüëß Lien facilit√© avec la famille</label></div>
                        <div class="option-card"><input type="checkbox" name="fonctionnalites" id="feat_cognitif" value="Stimulation cognitive"><label for="feat_cognitif">üß† Jeux et stimulation cognitive</label></div>
                        <div class="option-card"><input type="checkbox" name="fonctionnalites" id="feat_services" value="Acc√®s √† des services"><label for="feat_services">üîß Aide pour trouver des services</label></div>
                        <div class="option-card"><input type="checkbox" name="fonctionnalites" id="feat_urgence" value="Appel d'urgence"><label for="feat_urgence">üÜò Appel des secours en cas d'urgence</label></div>
                        <div class="option-card"><input type="checkbox" name="fonctionnalites" id="feat_autre" value="Autre"><label for="feat_autre">‚ú® Autre (pr√©cisez ci-dessous)</label></div>
                    </div>
                    <div class="autre-field" id="fonctionnalite_autre_field">
                        <input type="text" name="fonctionnalite_autre_texte" id="fonctionnalite_autre_texte" placeholder="Quelle autre fonctionnalit√© souhaiteriez-vous ?">
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Seriez-vous int√©ress√©(e) par ce type de solution ?</label>
                    <div class="rating-scale">
                        <div class="option-card"><input type="radio" name="interet" id="int_1" value="1" required><label for="int_1">1</label></div>
                        <div class="option-card"><input type="radio" name="interet" id="int_2" value="2"><label for="int_2">2</label></div>
                        <div class="option-card"><input type="radio" name="interet" id="int_3" value="3"><label for="int_3">3</label></div>
                        <div class="option-card"><input type="radio" name="interet" id="int_4" value="4"><label for="int_4">4</label></div>
                        <div class="option-card"><input type="radio" name="interet" id="int_5" value="5"><label for="int_5">5</label></div>
                    </div>
                    <div class="scale-labels"><span>Pas du tout int√©ress√©(e)</span><span>Tr√®s int√©ress√©(e)</span></div>
                </div>

                <div class="form-group">
                    <label class="required">Qu'est-ce qui vous freinerait le plus ?</label>
                    <div class="option-cards">
                        <div class="option-card"><input type="radio" name="frein" id="frein_donnees" value="Protection des donn√©es" required><label for="frein_donnees">üîí La protection de mes donn√©es</label></div>
                        <div class="option-card"><input type="radio" name="frein" id="frein_complexe" value="Complexit√©"><label for="frein_complexe">üòï Peur que ce soit trop compliqu√©</label></div>
                        <div class="option-card"><input type="radio" name="frein" id="frein_confiance" value="Confiance en l'IA"><label for="frein_confiance">ü§ñ Pas confiance en l'IA</label></div>
                        <div class="option-card"><input type="radio" name="frein" id="frein_humain" value="Pr√©f√®re contact humain"><label for="frein_humain">üë• Je pr√©f√®re le contact humain</label></div>
                        <div class="option-card"><input type="radio" name="frein" id="frein_aucun" value="Aucun frein"><label for="frein_aucun">‚úÖ Aucun frein particulier</label></div>
                    </div>
                </div>

                <div class="nav-buttons">
                    <button type="button" class="btn btn-secondary" onclick="prevSection()">‚Üê Retour</button>
                    <button type="button" class="btn btn-primary" onclick="nextSection()">Continuer ‚Üí</button>
                </div>
            </div>

            <!-- Section 5: Contact -->
            <div class="form-section" data-section="5">
                <h2 class="section-title">üì¨ Restons en Contact</h2>
                <p class="section-subtitle">Facultatif - Pour participer √† la suite de l'aventure</p>

                <div class="lead-magnet">
                    <div class="lead-magnet-title">üéÅ En bonus</div>
                    <p>Laissez votre email pour recevoir en avant-premi√®re notre <strong>guide gratuit : "5 conseils pour s√©curiser le domicile d'un proche"</strong></p>
                </div>

                <div class="form-group">
                    <label>Seriez-vous int√©ress√©(e) pour tester notre solution en avant-premi√®re ?</label>
                    <div class="option-cards">
                        <div class="option-card"><input type="radio" name="beta" id="beta_oui" value="Oui, je veux tester"><label for="beta_oui">‚úÖ Oui, je serais ravi(e) de tester !</label></div>
                        <div class="option-card"><input type="radio" name="beta" id="beta_info" value="Tenez-moi inform√©"><label for="beta_info">üìß Juste me tenir inform√©(e)</label></div>
                        <div class="option-card"><input type="radio" name="beta" id="beta_non" value="Non merci"><label for="beta_non">‚ùå Non merci</label></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="email">Votre email (pour recevoir le guide + les actualit√©s)</label>
                    <input type="email" name="email" id="email" placeholder="exemple@email.com">
                </div>

                <div class="form-group">
                    <label for="telephone">Votre t√©l√©phone (facultatif)</label>
                    <input type="tel" name="telephone" id="telephone" placeholder="06 12 34 56 78">
                </div>

                <div class="form-group">
                    <label for="commentaires">Un commentaire, une id√©e, une suggestion ?</label>
                    <textarea name="commentaires" id="commentaires" placeholder="Partagez-nous vos id√©es, vos attentes ou vos craintes... Chaque retour compte !"></textarea>
                </div>

                <div class="privacy-note">
                    <strong>üîê Vos donn√©es sont prot√©g√©es</strong><br>
                    Vos r√©ponses sont confidentielles. Si vous laissez vos coordonn√©es, elles ne seront jamais partag√©es avec des tiers. Conform√©ment au RGPD, vous pouvez demander leur suppression √† tout moment en nous √©crivant.
                </div>

                <div class="nav-buttons">
                    <button type="button" class="btn btn-secondary" onclick="prevSection()">‚Üê Retour</button>
                    <button type="submit" class="btn btn-submit" id="submitBtn">üöÄ Envoyer mes r√©ponses</button>
                </div>
            </div>

            <!-- Success -->
            <div class="form-section" data-section="success" id="successSection">
                <div class="success-message">
                    <div class="success-icon">üéâ</div>
                    <h2>Merci infiniment !</h2>
                    <p>Vos r√©ponses sont pr√©cieuses et nous aideront √† cr√©er une solution vraiment adapt√©e √† vos besoins.</p>
                    <p>Si vous avez laiss√© votre email, vous recevrez bient√¥t notre guide gratuit sur la s√©curisation du domicile.</p>
                    <br>
                    <p style="font-size: 0.95rem;">üíô N'h√©sitez pas √† partager ce questionnaire avec vos proches !</p>
                </div>
            </div>
        </form>
    </div>

    <footer class="footer">
        <p>Trust First ¬© 2025 - L'IA du Bien Vieillir √† Domicile</p>
    </footer>

    <script>
        // =====================================================
        // CONFIGURATION - REMPLACEZ CETTE URL PAR LA V√îTRE
        // =====================================================
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyHSDB2MnMWhdI21AZGysXsPO4rNCw5Yy-1EFFlHkKpiYKvoR5irFH5XuH1eyoClfeS/exec';
        // =====================================================

        let currentSection = 1;
        const totalSections = 5;

        function updateProgress() {
            const progress = ((currentSection - 1) / totalSections) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('currentSection').textContent = currentSection;
        }

        function showSection(n) {
            document.querySelectorAll('.form-section').forEach(s => s.classList.remove('active'));
            document.querySelector(`[data-section="${n}"]`)?.classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function validateCurrentSection() {
            const section = document.querySelector(`[data-section="${currentSection}"]`);
            const profil = document.querySelector('input[name="profil"]:checked')?.value;
            
            // Get all required fields in current section
            const requiredRadios = section.querySelectorAll('input[type="radio"][required]');
            const checkedNames = new Set();
            
            for (let field of requiredRadios) {
                const name = field.name;
                if (checkedNames.has(name)) continue;
                checkedNames.add(name);
                
                // Skip logement validation for professionals
                if (name === 'logement' && (profil === 'Professionnel de sant√©/social' || profil === 'Autre')) {
                    continue;
                }
                // Skip pro_context for non-professionals
                if (name === 'pro_context' && profil !== 'Professionnel de sant√©/social') {
                    continue;
                }
                
                if (!section.querySelector(`input[name="${name}"]:checked`)) {
                    showError('Veuillez r√©pondre √† toutes les questions obligatoires.');
                    return false;
                }
            }
            hideError();
            return true;
        }

        function showError(msg) {
            const el = document.getElementById('errorMessage');
            el.textContent = msg;
            el.style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function hideError() { document.getElementById('errorMessage').style.display = 'none'; }

        function nextSection() {
            if (!validateCurrentSection()) return;
            if (currentSection < totalSections) { currentSection++; showSection(currentSection); updateProgress(); }
        }

        function prevSection() {
            if (currentSection > 1) { currentSection--; showSection(currentSection); updateProgress(); }
        }

        // Conditional logic based on profile
        document.querySelectorAll('input[name="profil"]').forEach(r => {
            r.addEventListener('change', function() {
                const logementGroup = document.getElementById('logement_group');
                const proContextGroup = document.getElementById('pro_context_group');
                const aidantTempsGroup = document.getElementById('aidant_temps_group');
                const ageLabel = document.getElementById('age_label');
                const logementLabel = document.getElementById('logement_label');
                
                // Reset visibility
                logementGroup.classList.remove('visible');
                proContextGroup.classList.remove('visible');
                aidantTempsGroup.classList.remove('visible');
                
                // Clear required attribute
                logementGroup.querySelectorAll('input').forEach(i => i.required = false);
                proContextGroup.querySelectorAll('input').forEach(i => i.required = false);
                
                if (this.value === 'Senior (60 ans et plus)') {
                    logementGroup.classList.add('visible');
                    logementGroup.querySelector('input').required = true;
                    ageLabel.innerHTML = 'Votre tranche d\'√¢ge :<span class="label-hint"></span>';
                    logementLabel.textContent = 'Votre situation de logement :';
                } else if (this.value === 'Aidant familial') {
                    logementGroup.classList.add('visible');
                    logementGroup.querySelector('input').required = true;
                    aidantTempsGroup.classList.add('visible');
                    ageLabel.innerHTML = 'Votre tranche d\'√¢ge (en tant qu\'aidant) :<span class="label-hint"></span>';
                    logementLabel.textContent = 'Situation de logement de votre proche :';
                } else if (this.value === 'Professionnel de sant√©/social') {
                    proContextGroup.classList.add('visible');
                    proContextGroup.querySelector('input').required = true;
                    ageLabel.innerHTML = 'Votre tranche d\'√¢ge :<span class="label-hint"></span>';
                } else {
                    // "Autre" - no additional questions
                    ageLabel.innerHTML = 'Votre tranche d\'√¢ge :<span class="label-hint"></span>';
                }
            });
        });

        // Show "Autre" text field for features
        document.getElementById('feat_autre').addEventListener('change', function() {
            const autreField = document.getElementById('fonctionnalite_autre_field');
            if (this.checked) {
                autreField.classList.add('visible');
            } else {
                autreField.classList.remove('visible');
                document.getElementById('fonctionnalite_autre_texte').value = '';
            }
        });

        // Max 3 features
        document.querySelectorAll('input[name="fonctionnalites"]').forEach(cb => {
            cb.addEventListener('change', function() {
                const checked = document.querySelectorAll('input[name="fonctionnalites"]:checked');
                if (checked.length > 3) {
                    this.checked = false;
                    showError('Vous pouvez s√©lectionner 3 fonctionnalit√©s maximum.');
                }
            });
        });

        function collectFormData() {
            const f = document.getElementById('surveyForm');
            return {
                timestamp: new Date().toISOString(),
                profil: f.querySelector('input[name="profil"]:checked')?.value || '',
                age: f.querySelector('input[name="age"]:checked')?.value || '',
                logement: f.querySelector('input[name="logement"]:checked')?.value || '',
                pro_context: f.querySelector('input[name="pro_context"]:checked')?.value || '',
                difficultes: [...f.querySelectorAll('input[name="difficultes"]:checked')].map(e => e.value).join(', '),
                temps_aidant: f.querySelector('input[name="temps_aidant"]:checked')?.value || '',
                solutions_actuelles: [...f.querySelectorAll('input[name="solutions_actuelles"]:checked')].map(e => e.value).join(', '),
                appareil: f.querySelector('input[name="appareil"]:checked')?.value || '',
                interface: f.querySelector('input[name="interface"]:checked')?.value || '',
                experience_vocal: f.querySelector('input[name="experience_vocal"]:checked')?.value || '',
                fonctionnalites: [...f.querySelectorAll('input[name="fonctionnalites"]:checked')].map(e => e.value).join(', '),
                fonctionnalite_autre: f.querySelector('#fonctionnalite_autre_texte').value || '',
                interet: f.querySelector('input[name="interet"]:checked')?.value || '',
                frein: f.querySelector('input[name="frein"]:checked')?.value || '',
                beta: f.querySelector('input[name="beta"]:checked')?.value || '',
                email: f.querySelector('#email').value || '',
                telephone: f.querySelector('#telephone').value || '',
                commentaires: f.querySelector('#commentaires').value || ''
            };
        }

        document.getElementById('surveyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            if (!validateCurrentSection()) return;

            const btn = document.getElementById('submitBtn');
            btn.classList.add('loading');
            btn.disabled = true;

            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(collectFormData())
            })
            .then(() => {
                document.querySelectorAll('.form-section').forEach(s => s.classList.remove('active'));
                document.getElementById('successSection').classList.add('active');
                document.querySelector('.progress-container').style.display = 'none';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            })
            .catch(err => {
                console.error(err);
                showError('Une erreur est survenue. Veuillez r√©essayer.');
                btn.classList.remove('loading');
                btn.disabled = false;
            });
        });

        updateProgress();
    </script>
</body>
</html>
